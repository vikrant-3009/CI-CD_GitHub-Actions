name: Selenium Workflow

on: workflow_dispatch

jobs:
    selenium:
        name: Selenium Test
        runs-on: centos-2
        steps:
            - name: Checkout
              uses: actions/checkout@v3
            
            - name: Run Test
              run: |
                export JAVA_HOME=/opt/jdk-17.0.2/
                export M2_HOME=/opt/apache-maven-3.9.6/
                export PATH=$PATH:$M2_HOME/bin
                mvn -f selenium-testing/pom.xml test -Dmaven.test.failure.ignore=true \
                -Dhostname=192.168.56.104 -Dport=9010 -Dcontext=/mvcapp/calculate
      
            - name: Upload Selenium Test Report
              uses: actions/upload-artifact@v3
              with:
                name: Selenium Test Report
                path: selenium-testing/target/surefire-reports/emailable-report.html

            - name: Deploy to GitHub Pages
              id: deployment
              uses: actions/deploy-pages@v3